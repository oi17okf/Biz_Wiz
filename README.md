# Thesis Repository
This repository holds the code used to generate the graphs in the Thesis X (insert name here). It also holds some leftover code used during its development. 

## Repository Structure
This sections explains the structure of the entire repository.

- algorithm.cpp. This file holds all of the cpp code used. It does not generate any graphs. It takes an event log (of a specific format, elaborate more here), does a ton of calculations, then spits out two files, connections.txt and timestamps.txt that can be used to generate the graphs using PM4py.

- makefile. A build file that's used to compile any of the .cpp files into executables. See more info in Usage sections.

- desktop.exe. Generated by running the makefile. Windows executable for running the c++ algorithm.

- generate_graph.py. This file holds the python code used for generating the graphs. It has Pm4Py (link) as a dependancy. It generates both a graph based on harleens code, and mine. Therefore it needs both the text file generated by algorithm.cpp and the original event log. 

- Exempel. Folder for event logs.

- Graphs. Folder for generated graphs.

- pipeline.ps1. A powershell script that goes through each file in the Exempel folder and generates an old and new graph based on it in the Graphs folder. It does so by using the compiled code of algorithm.cpp and generate_graph.py.

- txt files. Data files used for passing information. Check usage section.

- tinyxml2.cpp/h. Code dependancy for parsing the event logs.

- Leftovers. Folder that holds a bunch of stuff used during development. Contains its own readme file.

## Dependencies
This program depends on Pm4Py. It can be found here. You need to download it and pip install it (to fix paths) order to run this project. The branch and commit that was used was X.

It also depends on tinyxml2 but those files are included in the project and dealt with in the makefile so you do not have to worry about that.

It also assume you have a python and c++ compiler. Make is used for compiling the c++ program.

## Compile & Run / Usage
All instructions assume Windows. Please note that the program is probably quite brittle, it has only been designed to work for me at this point. Therefore it might be necessary to look into the source code to do minor fixes. 

To Compile the executable based on algorithm.cpp, run `make`. This generates `desktop.exe`.

To generate a single pair of graphs, simply first run `desktop.exe [EVENT_LOG]` where the argument is a valid event log. If this generates no issues, run `python3 generate_graph.py [OUT_FILE] [CONNECTIONS_FILE] [TIMESTAMPS_FILE] [EVENT_LOG]` to generate the graphs. The graph based on Harleens work will be postfixed by \_old and mine by \_new.

To generate a pair of graphs for a multitude of event logs, simply fill the Exempel folder with the selected logs. Then run the powershell script pipeline.ps1. This can be done by either right-clicking the file and selecting 'run with powershell' or opening up a powershell terminal and simply executing the script. If it is the first time running a powershell script you may have to change executionpolicy. See this post for details. https://superuser.com/questions/106360/how-to-enable-execution-of-powershell-scripts